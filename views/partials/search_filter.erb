<div class="well sidebar-nav">
  <ul class="nav nav-list">
    <% @search_results["facets"].each do |facet| %>
        <% if facet[1]["_type"] == "terms" %>
            <li class="nav-header"><%= facet[0] %></li>
            <% facet[1]["terms"].each do |term| %>
                <li>
                  <% elasticsearch_term = term["term"].split(/\s/)[0] %>
                  <input type="checkbox" id="<%= elasticsearch_term %>" facet="<%= facet[0] %>" <%= (params[facet[0].downcase + "_" + elasticsearch_term] == "true") ? "checked" : "" %>/> <%= cap_words(term["term"]) %>
                </li>
            <% end %>
        <% elsif facet[1]["_type"] == "geo_distance" %>
            <li class="nav-header"><%= "Max Distance" %></li>
            <% facet[1]["ranges"].each do |range| %>
                <li>
                  <% context_string = " mile" %>
                  <% to_string = range["to"].to_i.to_s %>
                  <% if !(to_string.include? "1") %>
                      <% context_string += "s" %>
                  <% end %>
                  <a href="" id="<%= to_string %>" value="max_distance" facet="<%= facet[0].capitalize %>"><%= to_string + context_string %></a>
                </li>
            <% end %>
        <% else %>
            <li class="nav-header"><%= "Min Rating" %></li>
            <% facet[1]["ranges"].unshift({"from" => 0}).each do |range| %>
                <li>
                  <% rating = (range["from"].to_s == "" ? 1 : range["from"].to_i) %>
                  <input type="radio" name="rating" id="<%= rating %>" value="min_rating" <%= (params[:min_rating].to_i == rating) ? "checked" : "" %>>
                  <%= render_partial(:rating, {:locals => {:rating => rating}}) %>
                </li>
            <% end %>

        <% end %>
    <% end %>
    <li class="nav-header">Price</li>
    <li>
      <table>
        <tr>
          <td>Min:</td>
          <td>$<input type="text" id="min_price" class="input-mini" placeholder="0.00" value="<%= params[:min_price] %>" /></td>
        </tr>
        <tr>
          <td>Max:</td>
          <td>$<input type="text" id="max_price" class="input-mini" value="<%= params[:max_price] %>"/></td>
        </tr>
        <tr>
          <td colspan="2"><button class="btn btn-success btn-link" id="price_filter">Update</button></td>
        </tr>
      </table>
    </li>
    <li class="nav-header">Open Now</li>
    <li><input type="checkbox" id="open_now" <%= (params[:open_now] == "true") ? "checked" : "" %>> Open now</li>
    <li class="nav-header">In Stock</li>
    <li><input type="checkbox" id="in_stock" <%= (params[:in_stock] == "true") ? "checked" : "" %>> In stock</li>
    <li class="nav-header" style="text-transform: capitalize;"><button class="btn btn-link btn-inverse" id="filter_reset">Reset Filters</button></li>
  </ul>
</div>